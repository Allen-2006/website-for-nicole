<!DOCTYPE html>
<style>
    /* Color container
    #cf00ac
    */

    * {
        caret-color: transparent;
        }

    body {
        margin: 0;
        padding: 0;
        background-color: #111;
        color: #f77e9c;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: 'Courier New', Courier, monospace;
    }
     .status-bar {
        position: absolute;
        top: 6%;
        left: 3%;
        width: 92%;
        height: 24px;
        background-color: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border-radius: 8px;
        color: black;
        font-family: monospace;
        font-size: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 10px;
        z-index: 1;
    } 
/* 
     .status-bar {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding: 0 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        height: 25px;
        font-size: 12px;
    }  */

    .status-left {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .status-right {
        display: flex;
        gap: 15px;
        align-items: center;
    }

    .os-name {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .status-item {
        margin-left: 15px;
    }

    .battery-icon {
        width: 25px;
        height: 12px;
        border: 1px solid black;
        position: relative;
        display: inline-block;
        border-radius: 2px;
        margin-left: 5px;
    }

    .battery-level {
        width: 69%;
        height: 100%;
        background-color: black;
    }

    .battery-cap {
        width: 2px;
        height: 4px;
        background-color: black;
        position: absolute;
        right: -3px;
        top: 3px;
    }

    .relationship-clock {
        position: absolute;
        top: 65%;
        left: 17.5%;
        transform: translate(-50%, -50%);
        width: 20%;
        height: 10%;
        background-color: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(10px);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 15px rgba(110, 5, 70, 0.5);
        font-family: monospace;
        color: black;
        text-align: center;
        padding: 20px;
        overflow: hidden;
        z-index: 2;
    }

    .relationship-clock-title {
        font-size: 14px;
        margin-bottom: 5px;
        z-index: 1;
    }

    .relationship-clock-time {
        font-size: 12px;
        z-index: 1;
    }

    .liquid {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 0;
        background: linear-gradient(180deg, #ff69b4, #ff1493);
        transition: height 1s ease;
        z-index: 0;
    }

    .markings {
        position: absolute;
        right: 10px;
        top: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        z-index: 1;
    }

    .marking {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        width: 10px;
        height: 1px;
        background-color: black;
        z-index: 1;
    }

    .marking-label {
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 10px;
        color: black;
        z-index: 1;
    }

    .app-icon {
        width: 5%;
        height: auto;
        margin: 15px 0;
        cursor: pointer;
        position: relative;
        border-radius: 10px;
    }

    .app-icon img {
        width: 100%;
        height: auto;
    }

    .app-name {
        font-size: 1vw;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 5px;
    }

    .app-container {
        position: absolute;
        top: 21%;
        right: -13.5%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    

     .app-field {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 4;
        border-radius: 5px;
    }

    .app-content {
        width: 70%;
        height: 70%;
        right: 1%;
        bottom: 3%;
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        position: relative;
        transform: scale(0);
        transition: transform 0.5s ease;
    }

    .app-field.active .app-content {
        transform: scale(1);
    } 

    .hidden {
        display: none;
    }

    .fade-in {
        animation: fadeIn 1s forwards;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .computer-monitor {
        width: 70vw;
        height: 80vh;
        background: linear-gradient(45deg, #ffd1dc, #f97c8f);
        border-radius: 10px;
        position: relative;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        /* overflow: hidden; */
    }

    .heart-image {
        width: 100%;
        height: auto;
        object-fit: cover;
        border-radius: 10px;
    }

    .music-app {
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, #F33A5A, #F17F9E);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        border-radius: 10px;
    }

    .song-display {
        width: 200px;
        height: 200px;
        margin-bottom: 30px;
        border: 3px solid;
        border-radius: 10px;
        overflow: hidden; /* Add this */
        position: relative; /* Add this */
    }

    .song-display img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .audio-controls {
        width: 80%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .progress-container {
        width: 100%;
        position: relative;
        margin-bottom: 30px;
    }

    .progress-bar {
        width: 100%;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        cursor: pointer;
    }

    .progress {
        width: 0;
        height: 100%;
        background: white;
        border-radius: 2px;
        transition: width 0.1s linear;
    }

    .timestamp {
        position: absolute;
        bottom: -20px;
        font-size: 12px;
        color: white;
    }

    .current-time { left: 0; }
    .duration { right: 0; }

    .playback-controls {
        display: flex;
        gap: 20px;
        margin-top: 10px;
    }

    .control-btn {
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 10px;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .control-btn:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .photo-app {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #c100bd, #8a2be2); /* Vibrant purple gradient */
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        padding: 20px;
        border-radius: 10px;
    }


    .photo-app-left {
        width: 40%;
        color: #ff69b4; /* Hot pink */
        font-size: 24px;
        font-family: Arial, sans-serif;
        font-weight: bold;
        padding-left: 5%;
    }

    .photo-app-right {
        width: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-right: 5%;
    }

    .photo-window {
        width: 100%;
        height: 300px;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        border: 5px solid #1b084e; /* Hot pink frame */
    }

    .photo-window img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 5px;
    }

    .photo-controls {
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-top: 20px;
    }


    .photo-message {
        margin-top: 20px;
        font-size: 24px;
        font-family: Arial, sans-serif;
        opacity: 1;
    }

    .photo-message.yellow { color: yellow; }
    .photo-message.orange { color: orange; }
    .photo-message.black { color: black; }
    .photo-message.blue { color: rgb(6, 6, 149); }
    .photo-message.red { color: red; }
    .photo-message.green { color: rgb(18, 196, 137); }
    .photo-message.beige { color: beige; }
    .photo-message.mahogany { color: #C04000; }
    .photo-message.silver { color: silver; }
    .photo-message.peach { color: #FFDAB9; }
    .photo-message.dark-pink { color: #FF1493; }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .message-animate {
        animation: fadeInUp 1s ease-in-out;
    }

    .photo-message.visible {
        opacity: 1;
        transform: translateY(0);
    }

    button {
            /* Variables */
        --button_radius: 0.75em;
        --button_color: #e8e8e8;
        --button_outline_color: #1b084e;
        font-size: 17px;
        font-weight: bold;
        border: none;
        border-radius: var(--button_radius);
        background: var(--button_outline_color);
        }

    .button_top {
            /* New variables */
        --gradient-color-1: #8360c3;
        --gradient-color-2: #2ebf91;
        display: block;
        box-sizing: border-box;
        border: 2px solid var(--button_outline_color);
        border-radius: var(--button_radius);
        padding: 0.75em 1.5em;
        background: linear-gradient(to bottom, var(--gradient-color-1), var(--gradient-color-2));
        color: var(--button_outline_color);
        transform: translateY(-0.2em);
        transition: transform 0.1s ease;
        width: 110%;
        /*right: 30%;*/
        }

    button:hover .button_top {
            /* Pull the button upwards when hovered */
        transform: translateY(-0.33em);
        }

    button:active .button_top {
            /* Push the button downwards when pressed */
        transform: translateY(0);
        transform: translateX(-0.33em)
        }

     .computer-monitor {
        width: 70vw;
        height: 80vh;
        background: linear-gradient(45deg, #ffd1dc, #f97c8f);
        border-radius: 10px;
        position: relative;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        
    }

    .monitor-stand {
        width: 20%;
        height: 15vh;
        background: linear-gradient(to right, #ffd1dc, #f98294);
        position: absolute;
        bottom: 0vh;
        left: 40%;
        clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
    }

    .monitor-base {
        width: 30%;
        height: 2vh;
        background: #ffb6c1;
        position: absolute;
        bottom: -2vh;
        left: 35%;
        border-radius: 5px;
    } 

    .screen-texture {
        width: 95%;
        height: 90%;
        position: relative;
        top: 5%;
        left: 2.5%;
        background: none; /* Change from url to none */
        border-radius: 5px;
        transition: all 1s ease;
    }

    .screen-texture::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('macos.jpg') center/cover;
        transition: opacity 1s ease;
    }

    /* .screen-off {
        background-color: #000000 !important;  Add !important 
        z-index: 5;
    } */

    .screen-off::before {
        opacity: 0;
    }

    .screen-off {
        background-color: #000000 !important;
        z-index: 5;
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        /* Glass effect */
        background: 
            linear-gradient(
                90deg,
                rgba(255,255,255,0.03) 0%,
                rgba(255,255,255,0.05) 50%,
                rgba(255,255,255,0.03) 100%
            );
        box-shadow: 
            inset 0 0 50px rgba(255,255,255,0.1),
            inset 0 0 100px rgba(0,0,0,0.2);
        border-radius: 10px;
        
        /* Scanline effect */
        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.15),
                rgba(0,0,0,0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
        }
        
        /* Screen glare */
        &::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(
                ellipse at center,
                rgba(255,255,255,0.05) 0%,
                rgba(255,255,255,0) 60%
            );
            transform: rotate(-45deg);
            pointer-events: none;
        }
    }
        

    .terminal {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: auto;
        height: auto;
        padding: 15px;
        font-family: monospace;
        background-color: #111;
        color:#f77e9c;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(110, 5, 70, 0.5);
        overflow: hidden;
        transition: all 1s ease;
        z-index: 2; /* Ensure the terminal is above the screen texture */
    }

    .terminal.collapsed {
        transform: none;
        overflow-y: auto;
    }

    .typing {
        white-space: pre-wrap;
        overflow: hidden;
    }

    #cursor {
        display: inline-block;
        width: 6px;
        height: 10px;
        background-color: #f77e9c;
        margin-left: 2px;
        animation: blink 0.8s steps(2, start) infinite;
    }

    .security-app {
        width: 100%;
        height: 100%;
        background: /*#001f3f;*/ linear-gradient(135deg, #00060b, #343536); /* Vibrant gradient */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        border-radius: 10px;
        font-family: 'Courier New', Courier, monospace;
    }

    .quiz-title {
        font-size: 36px;
        color: #ff0000;
        margin-bottom: 20px;
    }

    .start-button {
        font-size: 24px;
        color: #ff0000;
        background: none;
        border: 2px solid #ff0000;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        transition: background 0.3s, color 0.3s;
    }

    .start-button:hover {
        background: #ff0000;
        color: #001f3f;
    }

    .question-block {
        display: none;
        flex-direction: column;
        align-items: center;
        text-align: center;
        color: #ff0000;
    }

    .question-text {
        font-size: 28px;
        margin-bottom: 20px;
        margin-top: 20px;
    }

    .answer-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        width: 100%;
    }

    .answer-button {
        font-size: 18px;
        color: #ff0000;
        background: none;
        border: 2px solid #ff0000;
        padding: 10px;
        cursor: pointer;
        border-radius: 5px;
        transition: background 0.3s, color 0.3s;
    }

    .answer-button:hover {
        background: #ff0000;
        color: #001f3f;
    }

    .answer-button.correct {
        background: #00ff00;
        border: 2px solid #00ff00;
        color: #001f3f;
    }

    .answer-button.incorrect {
        background: #ff0000a5;
        color: #001f3f;
    }

    .try-again {
        font-size: 18px;
        color: #ff0000;
        margin-top: 10px;
        display: none;
    }


    .myHeart-app {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #00ffcc, #ff00ff); /* Vibrant gradient */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        border-radius: 10px;
        font-family: 'Courier New', Courier, monospace;
        color: white;
        text-align: center;
    }

    .myHeart-message {
        background: rgba(0, 0, 0, 0.7);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        font-size: 24px;
        line-height: 1.5;
        max-width: 80%;
        animation: fadeIn 2s ease-in-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .messages-app {
        width: 100%;
        height: 100%;
        background: #000000;
        display: flex;
        flex-direction: column;
        border-radius: 10px;
        overflow: hidden;
    }

    .messages-header {
        padding: 15px;
        background: #1c1c1e;
        color: white;
        font-size: 18px;
        font-weight: bold;
        border-bottom: 1px solid #333;
    }

    .messages-content {
        flex: 1;
        overflow-y: auto;
        padding: 15px;
        display: flex;
        flex-direction: column;
    }

    .message {
        max-width: 70%;
        margin: 5px 0;
        padding: 10px;
        border-radius: 20px;
        font-size: 16px;
        opacity: 0;
        transform: translateY(20px);
        animation: messageAppear 0.3s forwards;
    }

    .message.received {
        background: #1c1c1e;
        color: white;
        align-self: flex-start;
        border-bottom-left-radius: 5px;
    }

    .typing-indicator {
        display: flex;
        gap: 3px;
        padding: 10px;
        width: fit-content;
        background: #1c1c1e;
        border-radius: 20px;
        margin: 5px 0;
        opacity: 0;
    }

    .typing-dot {
        width: 8px;
        height: 8px;
        background: #606060;
        border-radius: 50%;
        animation: typingBounce 0.5s infinite;
    }

    .typing-dot:nth-child(2) { animation-delay: 0.1s; }
    .typing-dot:nth-child(3) { animation-delay: 0.2s; }

    @keyframes typingBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
    }

    @keyframes messageAppear {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .messages-app-icon {
        width: 60px !important;
        height: 60px !important;
        position: absolute;
        left: 25%;
        transform: translateY(-60%);
        display: none;
    }

    .messages-app-icon img {
        width: 90%;
        height: 90%;
        border-radius: 15px;
    }

    .message-video {
        max-width: 250px;
        border-radius: 15px;
        margin: 5px 0;
        align-self: flex-start;
    }
</style>
<script>
    function updateDateTime() {
        const now = new Date();
        document.getElementById('datetime').textContent = 
            now.toLocaleDateString() + ' ' + 
            now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }
    setInterval(updateDateTime, 1000);

    function updateRelationshipClock() {
        const startDate = new Date('August 21, 2023 12:00:00');
        const now = new Date();
        const diff = now - startDate;

        const minutes = Math.floor(diff / (1000 * 60));
        const seconds = Math.floor((diff / 1000) % 60);

        document.getElementById('relationshipClockTime').textContent = 
            `${minutes} minutes`;

        const liquid = document.querySelector('.liquid');
        const heightPercentage = (seconds / 60) * 100;
        liquid.style.height = `${heightPercentage}%`;

        if (heightPercentage >= 100) {
            setTimeout(() => {
                liquid.style.height = '0';
            }, 1000);
        }
    }
   
    setInterval(updateRelationshipClock, 1000);
    

    function openApp(appId) {
        const appField = document.querySelector('.app-field');
        const appContent = document.querySelector('.app-content');
        
        if (appId === 'musicApp') {
            const musicApp = `
                    <div class="music-app">
                        <div class="song-display red"></div>
                        <div class="audio-controls">
                            <div class="progress-container">
                                <div class="progress-bar" id="progressBar">
                                    <div class="progress" id="progress"></div>
                                </div>
                                <span class="timestamp current-time" id="currentTime">0:00</span>
                                <span class="timestamp duration" id="duration">0:00</span>
                            </div>
                            <div class="playback-controls">
                                <button class="control-btn" onclick="prevSong()">⏮</button>
                                <button class="control-btn" id="playPauseBtn" onclick="togglePlay()">▶</button>
                                <button class="control-btn" onclick="nextSong()">⏭</button>
                            </div>
                        </div>
                        <audio id="audioPlayer"></audio>
                    </div>`;
            appContent.innerHTML = musicApp;
            setTimeout(initializeMusicApp, 100);
        } else if (appId === 'photosApp') {
            const photosApp = `
                <div class="photo-app">
                    <div class="photo-app-left">
                        <span id="photoAppIntro">Girl, I sure do love </span>
                        <div id="photoMessage" class="photo-message">your smile</div>
                    </div>
                    <div class="photo-app-right">
                        <div class="photo-window">
                            <img id="photoWindowImage" src="Images/IMG_8885.PNG" alt="Photo">
                        </div>
                        <div class="photo-controls">
                            <button> <span class="button_top" onclick="prevPhoto()"> Prev </span> </button>
                            <button> <span class="button_top" onclick="nextPhoto()"> Next </span> </button>
                        </div>
                    </div>
                </div>`;
            appContent.innerHTML = photosApp;
            setTimeout(initializePhotosApp, 100);
        } else if (appId === 'securityApp') {
            const securityApp = `
                <div class="security-app">
                    <div class="quiz-title" id="quizTitle">Authentication Quiz</div>
                    <button class="start-button" onclick="startQuiz()">Start</button>
                    <div class="question-block" id="questionBlock">
                        <div class="question-text" id="questionText"></div>
                        <div class="answer-grid" id="answerGrid"></div>
                        <div class="try-again" id="tryAgainMessage">Try again</div>
                    </div>
                </div>`;
            appContent.innerHTML = securityApp;
            setTimeout(initializeSecurityApp, 100);
        } else if (appId === 'myHeartApp') {
            const myHeartApp = `
                <div class="myHeart-app">
                    <div class="myHeart-message">
                        Coming Soon - A State of the Art technology engineered by our greatest minds to produce myHeart, a 3D rendering of the most vital organ of the human body, allowing medical students, practitioners, and most importantly, Nicole, to observe the heart in a new way.
                    </div>
                </div>`;
            appContent.innerHTML = myHeartApp;
        } else if (appId === 'messagesApp') {
            const messagesApp = `
                <div class="messages-app">
                    <div class="messages-header">Allen</div>
                    <div class="messages-content"></div>
                </div>`;
            appContent.innerHTML = messagesApp;
            setTimeout(initializeMessagesApp, 100);
        } else {
            appContent.innerHTML = document.getElementById(appId).innerHTML;
        }
        
        appField.style.display = 'flex';
        setTimeout(() => {
            appField.classList.add('active');
        }, 10);
    }

    function closeApp() {
        const appField = document.querySelector('.app-field');
        appField.classList.remove('active');
        setTimeout(() => {
            appField.style.display = 'none';
        }, 375);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const appField = document.querySelector('.app-field');
        appField.addEventListener('click', (e) => { 
            if (e.target === appField) {
                closeApp();
            }
        });

        // Initialize music app on page load
        initializeMusicApp();
    });

    function showElements() {
        const elements = document.querySelectorAll('.hidden');
        elements.forEach(element => {
            element.classList.remove('hidden');
            element.classList.add('fade-in');
        });
    }

    function initializeMusicApp() {
        const audioPlayer = document.getElementById('audioPlayer');
        const persistentAudioPlayer = document.getElementById('persistentAudioPlayer');
        const progressBar = document.getElementById('progressBar');
        const progress = document.getElementById('progress');
        const playPauseBtn = document.getElementById('playPauseBtn');
        let currentSongIndex = 0;

        const songs = [
            { 
                src: 'Frank Ocean - Seigfried.mp3', 
                color: 'red',
                img: 'blond.jpg'
            },
            { 
                src: 'Rosemary.mp3', 
                color: 'green',
                img: 'deftones.png'
            },
            { 
                src: 'Mazzy Star - Fade Into You (Official Music Video).mp3', 
                color: 'blue',
                img: 'mazzy_star.png'
            }
        ];

        function loadSong(index) {
            const song = songs[index];
            audioPlayer.src = song.src;
            persistentAudioPlayer.src = song.src;
            const songDisplay = document.querySelector('.song-display');
            songDisplay.className = `song-display ${song.color}`;
            songDisplay.innerHTML = `<img src="${song.img}" alt="Album Art">`;
        }

        function togglePlay() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                persistentAudioPlayer.play();
                playPauseBtn.textContent = '⏸';
            } else {
                audioPlayer.pause();
                persistentAudioPlayer.pause();
                playPauseBtn.textContent = '▶';
            }
        }

        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
            persistentAudioPlayer.play();
            playPauseBtn.textContent = '⏸';
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            loadSong(currentSongIndex);
            audioPlayer.play();
            persistentAudioPlayer.play();
            playPauseBtn.textContent = '⏸';
        }

        function updateProgress(e) {
            const { duration, currentTime } = e.target;
            const progressPercent = (currentTime / duration) * 100;
            progress.style.width = `${progressPercent}%`;
            
            document.getElementById('currentTime').textContent = formatTime(currentTime);
            document.getElementById('duration').textContent = formatTime(duration);
        }

        function setProgress(e) {
            const width = progressBar.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
            persistentAudioPlayer.currentTime = (clickX / width) * duration;
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Event listeners
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', nextSong);
        progressBar.addEventListener('click', setProgress);

        // Initialize first song
        loadSong(0);

        // Attach functions to window to ensure they are accessible
        window.togglePlay = togglePlay;
        window.nextSong = nextSong;
        window.prevSong = prevSong;
    }

    function initializePhotosApp() {
        const photos = [
            { src: 'Images/IMG_8892.PNG', message: 'your smile', color: 'yellow' },
            { src: 'Images/IMG_8899.PNG', message: 'your glare', color: 'orange' },
            { src: 'Images/IMG_8901.PNG', message: 'your bigotry', color: 'black' },
            { src: 'Images/IMG_8924.jpg', message: 'your beauty', color: 'blue' },
            { src: 'Images/IMG_8890.PNG', message: 'your resting bitch face', color: 'red' },
            { src: 'Images/IMG_8905.PNG', message: 'your charity', color: 'green' },
            { src: 'Images/IMG_8893.PNG', message: 'your complement', color: 'beige' },
            { src: 'Images/IMG_8922.PNG', message: 'your boobs', color: 'mahogany' },
            { src: 'Images/IMG_8928.jpg', message: 'your eyes', color: 'silver' },
            { src: 'Images/IMG_8926.jpg', message: 'your sportiness', color: 'blue' },
            { src: 'Images/IMG_8925.jpg', message: 'your curves', color: 'peach' },
            { src: 'Images/IMG_8923.jpg', message: 'you for who you are', color: 'dark-pink' }
        ];
        let currentPhotoIndex = 0;

        function updatePhotoViewer() {
            const photoWindowImage = document.getElementById('photoWindowImage');
            const photoMessage = document.getElementById('photoMessage');

            photoWindowImage.src = photos[currentPhotoIndex].src;
            photoMessage.textContent = photos[currentPhotoIndex].message;
            photoMessage.className = `photo-message ${photos[currentPhotoIndex].color}`;

            // Remove old animation class
            photoMessage.classList.remove('message-animate');
            // Force reflow
            void photoMessage.offsetWidth;
            // Add animation class
            photoMessage.classList.add('message-animate');
        }

        function nextPhoto() {
            currentPhotoIndex = (currentPhotoIndex + 1) % photos.length;
            updatePhotoViewer();
        }

        function prevPhoto() {
            currentPhotoIndex = (currentPhotoIndex - 1 + photos.length) % photos.length;
            updatePhotoViewer();
        }

        // Initialize first photo
        updatePhotoViewer();

        // Attach functions to window to ensure they are accessible
        window.nextPhoto = nextPhoto;
        window.prevPhoto = prevPhoto;
    }

    function initializeSecurityApp() {
        const questions = [
            {
                question: "What’s your go-to pasta dish?",
                correctAnswer: "Rigatoni Bolognese",
                answers: ["Rigatoni Bolognese", "Spaghetti Carbonara", "Fettuccine Alfredo", "Penne Arrabbiata"]
            },
            {
                question: "How tall are you?",
                correctAnswer: "5’2”",
                answers: ["5’2”", "5’4”", "5’6”", "5’1”"]
            },
            {
                question: "Where was our first date?",
                correctAnswer: "Ice Skating Rink",
                answers: ["Coffee Shop", "Amusement Park", "Beach", "Ice Skating Rink"]
            },
            {
                question: "What’s your favorite species of animal?",
                correctAnswer: "Aviary",
                answers: ["Feline", "Aviary", "Canine", "Marine"]
            },
            {
                question: "Which color is our future home named after?",
                correctAnswer: "Hazel",
                answers: ["Indigo", "Ivory", "Emerald", "Hazel"]
            },
            {
                question: "What do you prefer?",
                correctAnswer: "Natural",
                answers: ["Laundry", "Natural"]
            },
            {
                question: "What’s your future career?",
                correctAnswer: "Cardiothoracic surgeon",
                answers: ["Cardiothoracic surgeon", "Pediatrician", "Neuroscientist", "Oncologist"]
            },
            {
                question: "Where do you want to get married?",
                correctAnswer: "Seychelle",
                answers: ["Aruba", "Bali", "Seychelle", "Santorini"]
            },
            {
                question: "What’s the type of diamond you want for your ring?",
                correctAnswer: "Princess Cut Diamond",
                answers: ["Princess Cut Diamond", "Round Cut Diamond", "Cushion Cut Diamond", "Emerald Cut Diamond"]
            },
            {
                question: "How did we meet?",
                correctAnswer: "Ice skating",
                answers: ["Ice skating", "At a concert", "Through friends", "At a coffee shop"]
            }
        ];

        let currentQuestionIndex = 0;

        function startQuiz() {
            document.querySelector('.start-button').style.display = 'none';
            document.getElementById('quizTitle').style.display = 'none';
            document.getElementById('questionBlock').style.display = 'flex';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestionIndex];
            document.getElementById('questionText').textContent = question.question;
            const answerGrid = document.getElementById('answerGrid');
            answerGrid.innerHTML = '';
            question.answers.forEach(answer => {
                const button = document.createElement('button');
                button.textContent = answer;
                button.className = 'answer-button';
                button.onclick = () => checkAnswer(answer);
                answerGrid.appendChild(button);
            });
        }

        function checkAnswer(selectedAnswer) {
            const question = questions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.answer-button');
            if (selectedAnswer === question.correctAnswer) {
                buttons.forEach(button => {
                    if (button.textContent === selectedAnswer) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                });
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        showQuestion();
                    } else {
                        document.getElementById('questionBlock').innerHTML = 
                            '<div style="color: #00ff00; font-size: 24px; text-align: center;">Your identity has been proven</div>';
                        // Show messages app icon
                        setTimeout(() => {
                            const messagesIcon = document.getElementById('messagesAppIcon');
                            messagesIcon.style.display = 'block';
                            messagesIcon.classList.add('fade-in');
                        }, 1000);
                    }
                }, 1000);
            } else {
                document.getElementById('tryAgainMessage').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('tryAgainMessage').style.display = 'none';
                }, 2000);
            }
        }

        // Attach functions to window to ensure they are accessible
        window.startQuiz = startQuiz;
        window.showQuestion = showQuestion;
        window.checkAnswer = checkAnswer;
    }

    const poem = [
        "December",
        "It",
        "It was the first time it hadn't snowed by then.",
        "Little did I know it wasn’t just the glacier waters that would end.",
        "But back then, I had a great friend—",
        "A secret lover who used ice to make the pain mend.",
        "You...",
        "You held my hand as I took my first steps,",
        "Scared, enraged, and lacking rest.",
        "But once I placed my worries on you",
        "There was space in my mind to enjoy the view",
        "the view",
        "Of you.",
        "And how few your flaws seemed from my point of view.",
        "To me, you were perfect, a shining hue— of golden doubloons",
        "As priceless as 20 dollars is to a Jew.",
        "Perfect",
        "Perfect, like a star to the moon",
        "Reflecting grace and tenacity like the sun calling me to bloom.",
        "You fight through and through; your strength knows no bounds.",
        "Like a hound ready to pound on any morsel that comes around",
        "You work like a gambler with nothing to lose",
        "And Fight like a warrior, feral, chasing emerald hues.",
        "A prize for your time, a pull toward your dreams,",
        "You weave your destiny despite anxiety’s screams.",
        "Defiantly, you challenge society’s norms",
        "Conquering the storms with your big mouth and tireless form.",
        "You...",
        "You fight to understand me",
        "You battle my emotions to keep us free.",
        "Nothing I will ever do for you will amount to your immense grace.",
        "No, nothing will equate to the beauty that radiates everytime I stop to admire your face.",
        "but no...",
        "No, I'm not obsessed with you because of your body parts",
        "Even though your derriere makes me feel like a billionaire",
        "It's the energy in you that sets you apart",
        "And despite your very, very smelly farts",
        "I just wanted to let you know",
        "That I am no longer cold",
        "Because bae",
        "You light up my entire heart"
    ];


    function initializeMessagesApp() {
        const messagesContent = document.querySelector('.messages-content');
        let currentLine = 0;

        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.innerHTML = '<div class="typing-dot"></div>'.repeat(3);
            messagesContent.appendChild(indicator);
            setTimeout(() => indicator.style.opacity = '1', 0);
            return indicator;
        }

        function getTypingDelay(text) {
            // Calculate typing delay based on message length
            // Minimum 1.5 seconds, plus 50ms per character
            return Math.max(1500, text.length * 50);
        }

        function sendMessage(text) {
            const message = document.createElement('div');
            message.className = 'message received';
            message.textContent = text;
            messagesContent.appendChild(message);
            messagesContent.scrollTop = messagesContent.scrollHeight;
        }

        function sendVideo() {
            const videoContainer = document.createElement('div');
            videoContainer.className = 'message received';
            const video = document.createElement('video');
            video.className = 'message-video';
            video.src = 'allen-kiss.MOV';
            video.controls = true;
            videoContainer.appendChild(video);
            messagesContent.appendChild(videoContainer);
            messagesContent.scrollTop = messagesContent.scrollHeight;
        }

        function sendNextLine() {
            if (currentLine < poem.length) {
                const indicator = showTypingIndicator();
                const typingDelay = getTypingDelay(poem[currentLine]);
                
                setTimeout(() => {
                    indicator.remove();
                    sendMessage(poem[currentLine]);
                    currentLine++;
                    setTimeout(sendNextLine, 1000); // 1 second pause between messages
                }, typingDelay);
            } else {
                // After poem is complete, show typing indicator and send video
                const indicator = showTypingIndicator();
                setTimeout(() => {
                    indicator.remove();
                    sendVideo();
                }, 1000);
            }
        }

        sendNextLine();
    }

    let firstPower = true;  // Add this flag at the top of your script

    function toggleScreen() {
        const screenTexture = document.getElementById('screenTexture');
        const audioPlayer = document.getElementById('audioPlayer');
        const persistentAudioPlayer = document.getElementById('persistentAudioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        
        screenTexture.classList.toggle('screen-off');
        
        // Pause audio when screen turns off
        if (screenTexture.classList.contains('screen-off')) {
            if (audioPlayer) audioPlayer.pause();
            if (persistentAudioPlayer) persistentAudioPlayer.pause();
            if (playPauseBtn) playPauseBtn.textContent = '▶';
        }
        
        // Only run typeMessage on first power on
        if (firstPower && !screenTexture.classList.contains('screen-off')) {
            typeMessage();
            firstPower = false;
        }
    }

</script>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iNicole</title>
    <style>
        .wall-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70vh;
            background: linear-gradient(180deg, #ffd1dc, #fb9b9b);
        }
        
        .table-surface {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30vh;
            background: linear-gradient(180deg, #d44d78, #9e2d4f);
            box-shadow: 0 -10px 20px rgba(0, 0, 0, 0.2);
        }

        body {
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

         .computer-monitor {
            width: 70vw;
            height: 80vh;
            background: linear-gradient(45deg, #ffd1dc, #f97c8f);
            border-radius: 10px;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
           
        }

        #checkbox {
            display: none;
            }

        .power-button {
            position: absolute;
            bottom: 1%;
            right: .67%;
            z-index: 3; /* Ensure it's in front */
        }

        .switch {
            position: relative;
            width: 16px;
            height: 16px;
            background-color: rgb(99, 99, 99);
            border-radius: 50%;
            z-index: 1;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgb(126, 126, 126);
            box-shadow: 0px 0px 3px rgb(2, 2, 2) inset;
        }

        .switch svg {
            width: 0.5em;
        }

        .switch svg path {
            fill: rgb(48, 48, 48);
        }

        #checkbox:checked + .switch {
            --color: #f97c8f;
            box-shadow: 0px 0px 1px var(--color) inset,
                0px 0px 2px var(--color)  inset, 0px 0px 10px var(--color)  inset,
                0px 0px 40px var(--color) , 0px 0px 100px var(--color) ,
                0px 0px 5px var(--color);
            border: 2px solid rgb(255, 255, 255);
            background-color: rgb(189, 113, 140);
        }

        #checkbox:checked + .switch svg {
            filter: drop-shadow(0px 0px 5px var(--color) );
            }

        #checkbox:checked + .switch svg path {
            fill: rgb(255, 255, 255);
            }


        .screen-texture {
            width: 95%;
            height: 90%;
            position: absolute;
            top: 5%;
            left: 2.5%;
            background: none; /* Change from url to none */
            border-radius: 5px;
            transition: all 1s ease;
        }

        .screen-texture::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('macos.jpg') center/cover;
            transition: opacity 1s ease;
        }

        .screen-off {
            background-color: #000000 !important; /* Add !important */
        }

        .screen-off::before {
            opacity: 0;
        }

        .terminal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: auto;
            padding: 15px;
            font-family: monospace;
            background-color: #111;
            color:#f77e9c;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(110, 5, 70, 0.5);
            overflow: hidden;
            transition: all 1s ease;
           
        }

        .terminal.collapsed {
            transform: none;
            overflow-y: auto;
        }

        .typing {
            white-space: pre-wrap;
            overflow: hidden;
        }

        #cursor {
            display: inline-block;
            width: 6px;
            height: 10px;
            background-color: #f77e9c;
            margin-left: 2px;
            animation: blink 0.8s steps(2, start) infinite;
        } 
        /* Create a start animation: Create an ai generated logo, power button should be on the monitor stand, 
        when the power button is clicked, the monitor should turn on and the logo should appear on the screen, wih a black foreground
        */
    </style>
</head>
<body>
    <audio id="persistentAudioPlayer"></audio>
    <div class="wall-background"></div>
    <div class="table-surface"></div>
    <div class="monitor-base"></div>
    <div class="monitor-stand"></div>
    <div class="computer-monitor">
        <div class="status-bar">
            <div class="status-left">
                <div class="os-name">💝 Nicole OS 1.0</div>
            </div>
            <div class="status-right">
                <div id="datetime" class="status-item"></div>
                <div class="status-item battery-container">
                    <div class="battery-icon">
                        <div class="battery-level"></div>
                        <div class="battery-cap"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="screen-texture screen-off" id="screenTexture">
            <div class="app-field" onclick="closeApp()">
                <div class="app-content" onclick="event.stopPropagation()"></div>
            </div>
        </div>
        <div class="power-button">
            <input id="checkbox" type="checkbox" />
            <label class="switch" for="checkbox" onclick="toggleScreen()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="slider">
                <path
                d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V256c0 17.7 14.3 32 32 32s32-14.3 32-32V32zM143.5 120.6c13.6-11.3 15.4-31.5 4.1-45.1s-31.5-15.4-45.1-4.1C49.7 115.4 16 181.8 16 256c0 132.5 107.5 240 240 240s240-107.5 240-240c0-74.2-33.8-140.6-86.6-184.6c-13.6-11.3-33.8-9.4-45.1 4.1s-9.4 33.8 4.1 45.1c38.9 32.3 63.5 81 63.5 135.4c0 97.2-78.8 176-176 176s-176-78.8-176-176c0-54.4 24.7-103.1 63.5-135.4z"
                ></path>
            </svg>
            </label>
        </div>
    </div>
    
    <div class="relationship-clock hidden">
        <div class="relationship-clock-title">You’ve been mine for:</div>
        <div id="relationshipClockTime" class="relationship-clock-time"></div>
        <div class="liquid"></div>
        <div class="markings">
            <div class="marking" style="top: 25%;"></div>
            <div class="marking" style="top: 75%;"></div>
        </div>
        <div class="marking-label">30s</div>
    </div>
    <div id="typingEffect" class="terminal">
        <div class="typing" id="terminalMessage"></div><span id="cursor"></span>
    </div>
    <div class="app-container hidden">
        <div class="app-icon messages-app-icon" onclick="openApp('messagesApp')" id="messagesAppIcon">
            <img src="messages.png" alt="Messages">
            <div class="app-name">Message</div>
        </div>
        <div class="app-icon" onclick="openApp('securityApp')">
            <img src="Cyber-Security-Transparent-Images-PNG.png" alt="Security">
            <div class="app-name">Secure</div>
        </div>
        <div class="app-icon" onclick="openApp('musicApp')">
            <img src="Apple-Music-Logo-PNG-Image-Transparent-Background.png" alt="Music">
            <div class="app-name">Music</div>
        </div>
        <div class="app-icon" onclick="openApp('photosApp')">
            <img src="photos-icon.png" alt="Photos">
            <div class="app-name">Photos</div>
        </div>
        <div class="app-icon" onclick="openApp('myHeartApp')">
            <img src="myHeart.png" alt="My Heart" class="heart-image">
            <div class="app-name">Heart</div>
        </div>
    </div>
    <div id="securityApp" class="hidden">
        <!-- <div class="security-app">
            <div class="quiz-title" id="quizTitle">Authentication Quiz</div>
            <button class="start-button" onclick="startQuiz()">Start</button>
            <div class="question-block" id="questionBlock">
                <div class="question-text" id="questionText"></div>
                <div class="answer-grid" id="answerGrid"></div>
                <div class="try-again" id="tryAgainMessage">Try again</div>
            </div>
        </div> -->
    </div>
    <div id="musicApp" class="hidden"></div>
    <script>
        const message = `       
// Hey babe..
// It's been approximately 500 days
// since my willy became a Williamson...
// Or in other words.. The day you said yes.

// Since then I have been the proud owner
// of the best girlfriend on earth..

// However, getting here wasn't easy,
// and many times I got close to losing what I love the most,
// but we prevailed.

// To celebrate our relationship
// I created this machine for you!

// But actually!

// You need to prove your identity to me!
// Which will reveal a secret message, for my lover only!
// For now, bump some tunes and explore this system before you start the quiz.
// Enjoy this great machine along with its uniquely tailored UI, manifactured for Nicole, running Nicole OS.`;


        const typingSpeed = 1; // Speed of typing effect in ms
        let index = 0;
        const terminal = document.getElementById("terminalMessage");
        const typingEffect = document.getElementById("typingEffect");
        const cursor = document.getElementById("cursor");
        const container = document.querySelector(".container");


        /* filepath: /c:/Users/SUNYLoaner/Niu/index.html */
        function typeMessage() {
            if (index < message.length) {
                terminal.textContent += message[index];
                index++;
                terminal.appendChild(cursor);
                setTimeout(typeMessage, typingSpeed);
            } else {
                setTimeout(() => {
                    typingEffect.style.transition = "all 1s ease";
                    typingEffect.style.position = "absolute";
                    typingEffect.style.width = "38%";
                    typingEffect.style.height = "27%";
                    typingEffect.style.top = "150px";
                    typingEffect.style.left = "260px";
                    typingEffect.classList.add("collapsed");
                    showElements();
                }, 1000);
            }
        }
    </script>
</body>
</html>